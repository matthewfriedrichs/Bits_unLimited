<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bits unLimited</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
        /* --- CORE STYLES --- */
        body,
        html {
            overflow: hidden;
            background-color: #1a1a1a;
            color: #e5e5e5;
            touch-action: none;
            overscroll-behavior: none;
        }

        #canvas-container {
            touch-action: none;
            user-select: none;
            -webkit-user-select: none;
        }

        canvas {
            image-rendering: pixelated;
            touch-action: none;
        }

        /* --- UI COMPONENT STYLES --- */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 16px;
            width: 16px;
            border-radius: 50%;
            background: #ffffff;
            cursor: pointer;
            margin-top: -6px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            border-radius: 2px;
        }

        select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
            -webkit-print-color-adjust: exact;
        }

        input[type="checkbox"] {
            accent-color: #0ea5e9;
            width: 16px;
            height: 16px;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #262626;
        }

        ::-webkit-scrollbar-thumb {
            background: #404040;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #525252;
        }
    </style>
</head>

<body class="h-screen w-screen flex flex-col font-sans select-none">

    <div id="top-bar"
        class="h-12 bg-neutral-900 border-b border-neutral-700 flex items-center px-4 justify-between z-30 shrink-0">
        <div class="flex items-center gap-2 text-sky-500 font-bold">
            <i class="fas fa-cube"></i> <span class="hidden sm:inline">Bits unLimited</span> <span
                class="text-xs text-neutral-500 font-normal">v1.0 Alpha</span>
        </div>

        <div id="toolbar-area" class="flex items-center gap-2">
            <div class="flex bg-neutral-800 rounded p-1 gap-1">
                <button id="file-menu-btn"
                    class="hover:bg-neutral-700 text-white px-3 py-1 rounded text-sm transition flex items-center gap-2">
                    <i class="fas fa-folder-open text-sky-400"></i> <span class="hidden sm:inline">File</span>
                </button>
                <button id="settings-menu-btn"
                    class="hover:bg-neutral-700 text-white px-3 py-1 rounded text-sm transition flex items-center gap-2">
                    <i class="fas fa-cog text-neutral-400"></i> <span class="hidden sm:inline">Settings</span>
                </button>
            </div>

            <div class="flex bg-neutral-800 rounded p-1 gap-1 ml-2">
                <button id="undo-btn"
                    class="hover:bg-neutral-700 text-neutral-400 hover:text-white px-2 py-1 rounded transition"
                    title="Undo (Ctrl+Z)">
                    <i class="fas fa-undo"></i>
                </button>
                <button id="redo-btn"
                    class="hover:bg-neutral-700 text-neutral-400 hover:text-white px-2 py-1 rounded transition"
                    title="Redo (Ctrl+Y)">
                    <i class="fas fa-redo"></i>
                </button>
            </div>
        </div>

        <div class="flex items-center gap-3 relative">
            <button id="export-quick-btn"
                class="bg-sky-600 hover:bg-sky-500 text-white px-3 py-1 rounded text-sm transition shadow-sm">
                <i class="fas fa-download"></i> <span class="hidden sm:inline">Save</span>
            </button>
        </div>

        <div id="file-dropdown"
            class="absolute top-12 left-1/2 -translate-x-1/2 mt-1 w-56 bg-neutral-800 border border-neutral-700 rounded shadow-xl hidden z-50 flex-col">
            <button id="save-project-btn"
                class="text-left px-4 py-3 hover:bg-neutral-700 text-sm text-gray-200 border-b border-neutral-700 flex items-center gap-3"><i
                    class="fas fa-file-export text-neutral-400"></i> Save Project (.json)</button>
            <label
                class="text-left px-4 py-3 hover:bg-neutral-700 text-sm text-gray-200 cursor-pointer border-b border-neutral-700 flex items-center gap-3">
                <i class="fas fa-file-import text-neutral-400"></i> Open Project
                <input type="file" id="load-project-input" class="hidden" accept=".json">
            </label>
            <div class="px-4 py-2 text-[10px] uppercase text-neutral-500 font-bold">Export Image</div>
            <button id="export-png-btn"
                class="text-left px-4 py-2 hover:bg-neutral-700 text-sm text-gray-200 flex items-center gap-3"><i
                    class="fas fa-image text-neutral-400"></i> Current Frame</button>
            <button id="export-sheet-btn"
                class="text-left px-4 py-2 hover:bg-neutral-700 text-sm text-gray-200 flex items-center gap-3"><i
                    class="fas fa-film text-neutral-400"></i> Full Spritesheet</button>
        </div>
    </div>

    <div class="flex-1 relative flex overflow-hidden">
        <div id="left-sidebar"
            class="w-16 bg-neutral-800 border-r border-neutral-700 flex flex-col items-center py-4 gap-4 z-20 overflow-y-auto shrink-0 scrollbar-hide">
        </div>

        <div id="canvas-container" class="flex-1 relative overflow-hidden cursor-crosshair z-0 bg-[#1a1a1a]">
            <canvas id="main-canvas" class="absolute top-0 left-0 touch-none"></canvas>
            <div
                class="absolute top-4 right-4 bg-black/50 text-white text-xs px-2 py-1 rounded pointer-events-none select-none backdrop-blur-sm border border-white/10 shadow-lg">
                <span id="coords-display" class="font-mono">0, 0</span> <span class="text-neutral-500 mx-1">|</span>
                <span id="zoom-display" class="font-bold text-sky-400">100%</span>
            </div>
        </div>
    </div>

    <div id="bottom-panel" class="h-48 sm:h-56 bg-neutral-900 border-t border-neutral-700 flex z-30 shrink-0">
        <div class="w-2/5 sm:w-80 border-r border-neutral-700 flex flex-col">
            <div
                class="p-2 bg-neutral-800 text-xs font-bold uppercase tracking-wider flex justify-between items-center shrink-0 border-b border-neutral-700">
                <span>Layers</span>
                <div class="flex gap-2">
                    <button id="add-local-layer-btn" class="hover:text-amber-400 text-neutral-500 p-1"
                        title="Add Local Layer"><i class="fas fa-plus-square"></i></button>
                    <button id="add-layer-btn" class="hover:text-white text-neutral-300 p-1" title="Add Global Layer"><i
                            class="fas fa-plus"></i></button>
                </div>
            </div>
            <div id="layers-list" class="flex-1 overflow-y-auto p-2 space-y-1"></div>
        </div>
        <div class="flex-1 flex flex-col min-w-0">
            <div
                class="p-2 bg-neutral-800 text-xs font-bold uppercase tracking-wider flex justify-start gap-4 items-center shrink-0 border-b border-neutral-700">
                <div class="flex gap-3">
                    <button id="onion-btn" class="text-neutral-500 hover:text-white" title="Onion Skin"><i
                            class="fas fa-ghost"></i></button>
                    <button id="play-btn" class="hover:text-green-400 text-neutral-400" title="Play"><i
                            class="fas fa-play"></i></button>
                    <button id="dup-frame-btn" class="hover:text-sky-400 text-neutral-400" title="Duplicate"><i
                            class="fas fa-copy"></i></button>
                    <button id="add-frame-btn" class="hover:text-white text-neutral-400" title="New"><i
                            class="fas fa-plus"></i></button>
                </div>
                <span>Timeline</span>
            </div>
            <div id="frames-list"
                class="flex-1 overflow-x-auto flex p-2 gap-2 items-center whitespace-nowrap bg-neutral-900"></div>
        </div>
    </div>

    <div id="color-modal"
        class="fixed inset-0 bg-black/80 z-50 hidden flex items-center justify-center p-4 backdrop-blur-sm"></div>
    <div id="brush-modal"
        class="fixed inset-0 bg-black/80 z-50 hidden flex items-center justify-center p-4 backdrop-blur-sm"></div>
    <div id="settings-modal"
        class="fixed inset-0 bg-black/80 z-50 hidden flex items-center justify-center p-4 backdrop-blur-sm"></div>

    <script type="module" src="js/main.js"></script>
</body>

</html>